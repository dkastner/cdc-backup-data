function letterHash(){"use strict";if(location.hash){var n=location.hash.replace("#","");if(n.length===1)return n}return""}function getParameterByName(n){"use strict";n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+n+"=([^&#]*)").exec(window.location.search);return t?decodeURIComponent(t[1].replace(/\+/g," ")):""}function cleanGarbageHtml(){var t,n;t=["font"];$(t).each(function(){for(n=document.getElementsByTagName("font");n.length;){for(var t=n[0].parentNode;n[0].firstChild;)t.insertBefore(n[0].firstChild,n[0]);t.removeChild(n[0])}})}function loadDetail(){"use strict";function i(n){if(n.indexOf("href=")!==0)return n;return n.replace(/(^|\s)(((([^:\/?#\s]+):)?\/\/)?(([A-Za-z0-9-]+\.)+[A-Za-z0-9-]+)(:\d+)?([^?#\s]*)(\?([^#\s]*))?(#(\S*))?)/g,function(n,t,i,r,u,f){return n.indexOf("<\/div>")>0?n:(t?t:"")+'<a href="'+(f?i:"http://"+i)+'" target="_blank">'+i+"<\/a>"})}function n(n){return n=n.replace("&lt;div&gt;&amp;nbsp;&lt;/div&gt;",""),n=n.replace("&lt;div&gt;","&lt;p&gt;"),n=n.replace("&lt;/div&gt;","&lt;/p&gt;"),i(n)}function t(n,t,i){var f,u,o,e,r;return f=$(n).find(t+"First"+i).text(),u=$(n).find(t+"Last"+i).text(),o=$(n).find(t+"Phone"+i).text(),e=$(n).find(t+"email"+i).text(),r="",f.length!==0&&u.length!==0?r+=f+" "+u:f.length===0&&u.length!==0&&(r+=u),o.length!==0&&(r+="<br/>"+o),e.length!==0&&(r+='<br/><a href="mailto:'+e+'">'+e+"<\/a>"),r.length!==0&&(r=i>1?'<div class="addr" style="margin-top:12px;">'+r+"<\/div>":'<div class="addr">'+r+"<\/div>"),r}function r(n){for(var u,r="",i=1;i<10;i+=1)u=t(n,"PriorApproval",i),u.length!==0&&(r+=u);$("#data-PriorApprovalRequired").html(r)}function u(n){for(var u,r="",i=1;i<10;i+=1)u=t(n,"CDCPOC",i),u.length!==0&&(r+=u);$("#data-CDCPointsOfContact").html(r)}function f(t){var f,e,i,o,s,h,c;f=$(t).find("CDCTestCode").text();e=$(t).find("TestOrderNamSort").text();i=$(t).find("TestOrderNam").text();o=$(selectorNavigationTestOrder+" > a").attr("href");$(selectorNavigationTestOrder+" > a").attr("href",o+"?CDCTestCode="+f);$(selectorNavigationTestOrder+" > a").html(i);$.browser.msie||(s=new CDC.LeftNav("nav-primary"),s.render());h=document.title;document.title=h.replace("TestOrderTitle",e).replace(/<[^>]+>/ig,"");$("#data-wrapper").show();$("#data-TestOrderNam").html(i);$("#data-CDCTestCode").html($(t).find("CDCTestCode").text());$("#data-TestOrderSynonym").html(n($(t).find("TestOrderSynonym").text()));$("#data-Center").html($(t).find("Center").text());$("#data-AcceptableSampleForTesting").html(n($(t).find("AcceptableSampleForTesting").text()));$("#data-SupplementalInformationRequired").html(n($(t).find("SupplementalInformationRequired").text()));$("#data-Performed_x0020_on_x0020_Specimans_x0020_from").html(n($(t).find("Performed_x0020_on_x0020_Specimans_x0020_from").text()));$("#data-AcceptableSampleForTesting").html(n($(t).find("AcceptableSampleForTesting").text()));$("#data-MinimumVolume").html(n($(t).find("MinimumVolume").text()));$("#data-StorageAndPreservation").html(n($(t).find("StorageAndPreservation").text()));$("#data-SpecimenLabeling").html(n($(t).find("SpecimenLabeling").text()));$("#data-ShippingInstructions").html(n($(t).find("ShippingInstructions").text()));$("#data-Method").html(n($(t).find("Method").text()));$("#data-TurnAround").html(n($(t).find("TurnAround").text()));$("#data-InterferencesLimitations").html(n($(t).find("InterferencesLimitations").text()));$("#data-AdditionalInfo").html(n($(t).find("AdditionalInfo").text()));$("#data-Transport").html(n($(t).find("Transport").text()));$("#data-Link").html($(t).find("Link").text());$("#data-Version").html($(t).find("Version").text());c=$(t).find("PriorApprovalRequired").text()==="1";c?r(t):$("#data-PriorApprovalRequired").html("None");u(t);cleanGarbageHtml()}function e(n){xmlDoc=n;var t=getParameterByName("CDCTestCode");t===""&&(window.location=baseRoot+"list.html");$(xmlDoc).find(xmlRootElement).each(function(){var n=$(this).find("CDCTestCode").text();if(t===n){f(this);return}})}$("#data-wrapper").hide();$.ajax({async:!1,type:"GET",url:baseRoot+"js-app/data.xml",dataType:"xml",success:e})}function buildLetters(){"use strict";selectedLetter=letterHash();$(".letters > ul").html("");$(letters).each(function(){var n=this;selectedLetter===n?$(selectorLetters+" > ul").append("<li>"+n+"<\/li>"):$(selectorLetters+" > ul").append('<li><a href="#'+n+'">'+n+"<\/a><\/li>")})}function loadLetters(){"use strict";var t,n;t=xmlDoc.getElementsByTagName(xmlRootElement);letters=[];$(t).each(function(){n=$(this).find("TestOrderNamSort").text().charAt(0).toUpperCase();letters.length===0&&letters.push(n);letters.indexOf(n)===-1&&letters.push(n)});letters.sort();buildLetters()}function removeHtml(n){try{var t=document.createElement("DIV");return t.innerHTML=$("<div/>").html(n).text(),t.textContent||t.innerText}catch(i){return n}}function autoCompletePush(n){autoCompleteWords.indexOf(n)===-1&&autoCompleteWords.push(removeHtml(n))}function buildTable(n,t){"use strict";var i;loadLetters();$(selectorTableBody).html("");i=$(n).sort(function(n,t){var i,r;return i=$(n).find("TestOrderNamSort").text(),r=$(t).find("TestOrderNamSort").text(),i<r?-1:i===r?0:1});$(i).each(function(){var i,n,r;i=$(this).find("CDCTestCode").text();n=$(this).find("TestOrderNam").text();n=n.replace("&lt;div&gt;","").replace("&lt;/div&gt;","");t&&autoCompletePush($(this).find("TestOrderNamSort").text());r='<tr><td style="width:80%"><a href="'+baseRoot+"detail.html?CDCTestCode="+i+'">'+n+'<\/a><\/td><td style="width:20%">'+i+"<\/td><\/tr>";$(selectorTableBody).append(r)});cleanGarbageHtml();t&&$(selectorSearchTerm).autocomplete(autoCompleteWords,{matchContains:!0,scrollHeight:200,inputFocus:!1,selectFirst:!1})}function listShowAll(){"use strict";var n;letters||loadLetters();fullTable?($(selectorTableBody).html(""),$(selectorTableBody).html(fullTable)):(n=xmlDoc.getElementsByTagName(xmlRootElement),buildTable(n,!0),fullTable=$(selectorTableBody).html(),fullTableLength=n.length);$(selectorResultViewAll).hide();$(selectorResultCountShowing).html(fullTableLength);$(selectorResultCountAll).html(fullTableLength)}function searchIndex(){"use strict";var n,t,i,r;$(selectorSearchedFor).html("");$(selectorTableBody).html("");n=$(selectorSearchTerm).val();t=xmlDoc.getElementsByTagName(xmlRootElement);n.length<3?($(selectorSearchMessage).html("Please enter at least three (3) characters."),listShowAll()):(i=0,r=[],$(t).each(function(){var f,t=[],u;t.push($(this).find("CDCTestCode").text());t.push($(this).find("TestOrderNamSort").text());t.push($(this).find("TestOrderSynonym").text());t.push($(this).find("CDCPOCLast1").text());t.push($(this).find("CDCPOCFirst1").text());t.push($(this).find("CDCPOCPhone1").text());t.push($(this).find("CDCPOCemail1").text());t.push($(this).find("CDCPOCLast2").text());t.push($(this).find("CDCPOCFirst2").text());t.push($(this).find("CDCPOCPhone2").text());t.push($(this).find("CDCPOCemail2").text());f=new RegExp(n,"i");u=!1;$(t).each(function(n,t){t.match(f)!=null&&(u=!0)});u&&(r.push(this),i++)}),buildTable(r,!1),$(selectorResultCountShowing).html(i),$(selectorResultCountAll).html(t.length),$(selectorResultViewAll).show())}function listShowLetter(){"use strict";var n,t,i;letters||loadLetters();n=xmlDoc.getElementsByTagName(xmlRootElement);t=[];i=0;$(n).each(function(){var n=$(this).find("TestOrderNamSort").text().charAt(0).toUpperCase();n===selectedLetter&&(t.push(this),i+=1)});$(selectorResultCountShowing).html(i);$(selectorResultCountAll).html(n.length);$(selectorResultViewAll).show();buildTable(t,!1)}function bindEvents(){"use strict";buildLetters();$(selectorSearchTerm).bind("keypress",function(n){n.which===13&&(n.preventDefault(),searchIndex())});$(selectorSearchButton).bind("click",function(){searchIndex();bindEvents()});$(selectorResultViewAll).bind("click",function(){$(selectorSearchTerm).val("");listShowAll();bindEvents()});$(selectorLetters+" a").bind("click",function(){var n=$(this).attr("href");n&&(selectedLetter=n.replace("#",""),listShowLetter(),bindEvents())})}function loadList(){"use strict";function n(n){xmlDoc=n;listShowAll()}$(selectorNavigationTestOrder).hide();$.ajax({async:!1,type:"GET",url:baseRoot+"js-app/data.xml",dataType:"xml",success:n});bindEvents()}var baseRoot="/laboratory/specimen-submission/",xmlDoc,letters,fullTable,fullTableLength,selectedLetter="",autoCompleteWords=[],selectorLetters=".letters",selectorResultCountShowing=".results-count-showing",selectorResultCountAll=".results-count-all",selectorResultViewAll=".view-all",selectorTableBody="#tests > table > tbody",selectorSearchedFor="#searched-for",selectorSearchMessage="#search-message",selectorSearchTerm="#searchterm",selectorNavigationTestOrder="#nav-testorder",selectorSearchButton="#search",xmlRootElement="QryTableMerge";Array.indexOf||(Array.prototype.indexOf=function(n){for(var t=0;t<this.length;t++)if(this[t]==n)return t;return-1});